(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-intermediate-sticky-scroll-data"],{"0319":function(t,e,n){"use strict";(function(t){var i=n("4ea4");n("99af"),n("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("fabb")),o=n("d63f"),s={mixins:[a.default],data:function(){return{upOption:{},tabs:[{name:"全部",goods:null,num:1,y:0,curPageLen:0,hasNext:!0},{name:"母婴",goods:null,num:1,y:0,curPageLen:0,hasNext:!0},{name:"图书",goods:null,num:1,y:0,curPageLen:0,hasNext:!0}],tabIndex:0,preIndex:0,navTop:null,isShowSticky:!1}},computed:{goods:function(){return this.tabs[this.tabIndex].goods}},methods:{downCallback:function(){this.mescroll.resetUpScroll()},upCallback:function(t){var e=this;this.isChangeTab&&(this.mescroll.hideUpScroll(),uni.showLoading());var n=this.tabs[this.tabIndex].name;(0,o.apiGoods)(t.num,t.size,n).then((function(n){var i=e.tabs[e.tabIndex];1==t.num&&(i.goods=[]),i.goods=i.goods.concat(n.list),setTimeout((function(){e.mescroll.endSuccess(n.list.length),i.num=t.num,i.curPageLen=n.list.length,i.hasNext=e.mescroll.optUp.hasNext,e.navTop||e.setNavTop(),e.isChangeTab&&(e.isChangeTab=!1,uni.hideLoading(),e.isShowSticky&&e.mescroll.scrollTo(e.navTop,0))}),20)})).catch((function(){e.mescroll.endErr()}))},setNavTop:function(){var e=this,n=uni.createSelectorQuery().select("#tabInList");n.boundingClientRect((function(n){t("log","tabInList基本信息 = "+JSON.stringify(n)," at pages/intermediate/sticky-scroll-data.vue:119"),e.navTop=n.top})).exec()},scroll:function(){t("log","滚动条位置 = "+this.mescroll.getScrollTop()+", navTop = "+this.navTop," at pages/intermediate/sticky-scroll-data.vue:126"),this.mescroll.getScrollTop()>=this.navTop?this.isShowSticky=!0:this.isShowSticky=!1},topClick:function(){this.isShowSticky=!1},tabChange:function(t){var e=this,n=this.tabs[this.preIndex];n.y=this.mescroll.getScrollTop(),this.preIndex=t;var i=this.tabs[t];i.goods?(this.mescroll.setPageNum(i.num+1),this.mescroll.endSuccess(i.curPageLen,i.hasNext),this.$nextTick((function(){e.mescroll.scrollTo(i.y,0)}))):(this.isChangeTab=!0,this.mescroll.resetUpScroll())}},onPageScroll:function(e){t("log","滚动条位置 = "+e.scrollTop+", navTop = "+this.navTop," at pages/intermediate/sticky-scroll-data.vue:162"),e.scrollTop>=this.navTop?this.isShowSticky=!0:this.isShowSticky=!1}};e.default=s}).call(this,n("0de9")["log"])},"0cba":function(t,e,n){"use strict";n.r(e);var i=n("0319"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"0dd3":function(t,e,n){"use strict";var i=n("dfd3"),a=n.n(i);a.a},1101:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".demo-tip[data-v-d587aaf4]{padding:%?18?%;font-size:%?24?%;text-align:center}",""]),t.exports=e},"70c9":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={meTabs:n("1db9").default,mescrollBody:n("0ead").default,goodList:n("2f9d").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[t.isShowSticky?n("me-tabs",{attrs:{fixed:!0,tabs:t.tabs},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabChange.apply(void 0,arguments)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}}):t._e(),n("mescroll-body",{ref:"mescrollRef",attrs:{up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)},topclick:function(e){arguments[0]=e=t.$handleEvent(e),t.topClick.apply(void 0,arguments)}}},[n("v-uni-swiper",{staticStyle:{"min-height":"300rpx"},attrs:{autoplay:"true",interval:"3000",duration:"300",circular:"true"}},[n("v-uni-swiper-item",[n("v-uni-image",{staticStyle:{width:"100%",height:"auto"},attrs:{src:"https://www.mescroll.com/img/swiper1.jpg",mode:"widthFix"}})],1),n("v-uni-swiper-item",[n("v-uni-image",{staticStyle:{width:"100%",height:"auto"},attrs:{src:"https://www.mescroll.com/img/swiper2.jpg",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"demo-tip"},[n("v-uni-view",[t._v("列表只初始化一次,切换菜单缓存数据")]),n("v-uni-view",[t._v("吸顶通过监听滚动条实现, 比sticky复杂, 但APP端可兼容低端机")])],1),n("v-uni-view",{attrs:{id:"tabInList"}},[n("me-tabs",{attrs:{tabs:t.tabs},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabChange.apply(void 0,arguments)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}})],1),n("good-list",{attrs:{list:t.goods}})],1)],1)},o=[]},"9e27":function(t,e,n){"use strict";n.r(e);var i=n("70c9"),a=n("0cba");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("0dd3");var s,l=n("f0c5"),c=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"d587aaf4",null,!1,i["a"],s);e["default"]=c.exports},dfd3:function(t,e,n){var i=n("1101");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("585f817b",i,!0,{sourceMap:!1,shadowMode:!1})}}]);